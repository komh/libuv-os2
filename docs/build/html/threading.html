
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Threading and synchronization utilities &#8212; libuv documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/nature.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Miscellaneous utilities" href="misc.html" />
    <link rel="prev" title="Shared library handling" href="dll.html" /> 
  </head><body>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="misc.html" title="Miscellaneous utilities"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="dll.html" title="Shared library handling"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libuv 1.44.2-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="api.html" accesskey="U">API documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Threading and synchronization utilities</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="threading-and-synchronization-utilities">
<span id="threading"></span><h1>Threading and synchronization utilities<a class="headerlink" href="#threading-and-synchronization-utilities" title="Permalink to this headline">¶</a></h1>
<p>libuv provides cross-platform implementations for multiple threading and
synchronization primitives. The API largely follows the pthreads API.</p>
<section id="data-types">
<h2>Data types<a class="headerlink" href="#data-types" title="Permalink to this headline">¶</a></h2>
<dl class="c type">
<dt class="sig sig-object c" id="c.uv_thread_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_t</span></span></span><a class="headerlink" href="#c.uv_thread_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Thread data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_thread_cb">
<span class="k"><span class="pre">typedef</span></span><span class="w"> </span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_cb</span></span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="p"><span class="pre">)</span></span><a class="headerlink" href="#c.uv_thread_cb" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Callback that is invoked to initialize thread execution. <cite>arg</cite> is the same
value that was passed to <a class="reference internal" href="#c.uv_thread_create" title="uv_thread_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_thread_create()</span></code></a>.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_key_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_key_t</span></span></span><a class="headerlink" href="#c.uv_key_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Thread-local key data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_once_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_once_t</span></span></span><a class="headerlink" href="#c.uv_once_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Once-only initializer data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_mutex_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_t</span></span></span><a class="headerlink" href="#c.uv_mutex_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Mutex data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_rwlock_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_t</span></span></span><a class="headerlink" href="#c.uv_rwlock_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Read-write lock data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_sem_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_t</span></span></span><a class="headerlink" href="#c.uv_sem_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Semaphore data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_cond_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_t</span></span></span><a class="headerlink" href="#c.uv_cond_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Condition data type.</p>
</dd></dl>

<dl class="c type">
<dt class="sig sig-object c" id="c.uv_barrier_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_barrier_t</span></span></span><a class="headerlink" href="#c.uv_barrier_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Barrier data type.</p>
</dd></dl>

</section>
<section id="api">
<h2>API<a class="headerlink" href="#api" title="Permalink to this headline">¶</a></h2>
<section id="threads">
<h3>Threads<a class="headerlink" href="#threads" title="Permalink to this headline">¶</a></h3>
<dl class="c type">
<dt class="sig sig-object c" id="c.uv_thread_options_t">
<span class="k"><span class="pre">type</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_options_t</span></span></span><a class="headerlink" href="#c.uv_thread_options_t" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Options for spawning a new thread (passed to <a class="reference internal" href="#c.uv_thread_create_ex" title="uv_thread_create_ex"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_thread_create_ex()</span></code></a>).</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">typedef</span> <span class="n">struct</span> <span class="n">uv_thread_options_s</span> <span class="p">{</span>
  <span class="n">enum</span> <span class="p">{</span>
    <span class="n">UV_THREAD_NO_FLAGS</span> <span class="o">=</span> <span class="mh">0x00</span><span class="p">,</span>
    <span class="n">UV_THREAD_HAS_STACK_SIZE</span> <span class="o">=</span> <span class="mh">0x01</span>
  <span class="p">}</span> <span class="n">flags</span><span class="p">;</span>
  <span class="n">size_t</span> <span class="n">stack_size</span><span class="p">;</span>
<span class="p">}</span> <span class="n">uv_thread_options_t</span><span class="p">;</span>
</pre></div>
</div>
<p>More fields may be added to this struct at any time, so its exact
layout and size should not be relied upon.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.26.0.</span></p>
</div>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_thread_create">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tid</span></span>, <a class="reference internal" href="#c.uv_thread_cb" title="uv_thread_cb"><span class="n"><span class="pre">uv_thread_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">entry</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_thread_create" title="Permalink to this definition">¶</a><br /></dt>
<dd><div class="versionchanged">
<p><span class="versionmodified changed">Changed in version 1.4.1: </span>returns a UV_E* error code on failure</p>
</div>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_thread_create_ex">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_create_ex</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tid</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#c.uv_thread_options_t" title="uv_thread_options_t"><span class="n"><span class="pre">uv_thread_options_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">params</span></span>, <a class="reference internal" href="#c.uv_thread_cb" title="uv_thread_cb"><span class="n"><span class="pre">uv_thread_cb</span></span></a><span class="w"> </span><span class="n"><span class="pre">entry</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">arg</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_thread_create_ex" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Like <a class="reference internal" href="#c.uv_thread_create" title="uv_thread_create"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_thread_create()</span></code></a>, but additionally specifies options for creating a new thread.</p>
<p>If <cite>UV_THREAD_HAS_STACK_SIZE</cite> is set, <cite>stack_size</cite> specifies a stack size for the new thread.
<cite>0</cite> indicates that the default value should be used, i.e. behaves as if the flag was not set.
Other values will be rounded up to the nearest page boundary.</p>
<div class="versionadded">
<p><span class="versionmodified added">New in version 1.26.0.</span></p>
</div>
</dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_thread_self">
<a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_self</span></span></span><span class="sig-paren">(</span><span class="kt"><span class="pre">void</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_thread_self" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_thread_join">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_join</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">tid</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_thread_join" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_thread_equal">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_thread_equal</span></span></span><span class="sig-paren">(</span><span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">t1</span></span>, <span class="k"><span class="pre">const</span></span><span class="w"> </span><a class="reference internal" href="#c.uv_thread_t" title="uv_thread_t"><span class="n"><span class="pre">uv_thread_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">t2</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_thread_equal" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="thread-local-storage">
<h3>Thread-local storage<a class="headerlink" href="#thread-local-storage" title="Permalink to this headline">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The total thread-local storage size may be limited. That is, it may not be possible to
create many TLS keys.</p>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_key_create">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_key_create</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_key_t" title="uv_key_t"><span class="n"><span class="pre">uv_key_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_key_create" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_key_delete">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_key_delete</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_key_t" title="uv_key_t"><span class="n"><span class="pre">uv_key_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_key_delete" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_key_get">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="sig-name descname"><span class="n"><span class="pre">uv_key_get</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_key_t" title="uv_key_t"><span class="n"><span class="pre">uv_key_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">key</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_key_get" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_key_set">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_key_set</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_key_t" title="uv_key_t"><span class="n"><span class="pre">uv_key_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">key</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_key_set" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="once-only-initialization">
<h3>Once-only initialization<a class="headerlink" href="#once-only-initialization" title="Permalink to this headline">¶</a></h3>
<p>Runs a function once and only once. Concurrent calls to <a class="reference internal" href="#c.uv_once" title="uv_once"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_once()</span></code></a> with the
same guard will block all callers except one (it’s unspecified which one).
The guard should be initialized statically with the UV_ONCE_INIT macro.</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_once">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_once</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_once_t" title="uv_once_t"><span class="n"><span class="pre">uv_once_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">guard</span></span>, <span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="p"><span class="pre">(</span></span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">callback</span></span><span class="p"><span class="pre">)</span></span><span class="p"><span class="pre">(</span></span><span class="kt"><span class="pre">void</span></span><span class="p"><span class="pre">)</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_once" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="mutex-locks">
<h3>Mutex locks<a class="headerlink" href="#mutex-locks" title="Permalink to this headline">¶</a></h3>
<p>Functions return 0 on success or an error code &lt; 0 (unless the
return type is void, of course).</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_init_recursive">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_init_recursive</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_init_recursive" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_destroy">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_destroy</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_destroy" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_lock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_lock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_lock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_trylock">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_trylock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_trylock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_mutex_unlock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_mutex_unlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">handle</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_mutex_unlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="read-write-locks">
<h3>Read-write locks<a class="headerlink" href="#read-write-locks" title="Permalink to this headline">¶</a></h3>
<p>Functions return 0 on success or an error code &lt; 0 (unless the
return type is void, of course).</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_destroy">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_destroy</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_destroy" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_rdlock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_rdlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_rdlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_tryrdlock">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_tryrdlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_tryrdlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_rdunlock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_rdunlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_rdunlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_wrlock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_wrlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_wrlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_trywrlock">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_trywrlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_trywrlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_rwlock_wrunlock">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_rwlock_wrunlock</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_rwlock_t" title="uv_rwlock_t"><span class="n"><span class="pre">uv_rwlock_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">rwlock</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_rwlock_wrunlock" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="semaphores">
<h3>Semaphores<a class="headerlink" href="#semaphores" title="Permalink to this headline">¶</a></h3>
<p>Functions return 0 on success or an error code &lt; 0 (unless the
return type is void, of course).</p>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_sem_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_sem_t" title="uv_sem_t"><span class="n"><span class="pre">uv_sem_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sem</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">value</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_sem_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_sem_destroy">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_destroy</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_sem_t" title="uv_sem_t"><span class="n"><span class="pre">uv_sem_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sem</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_sem_destroy" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_sem_post">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_post</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_sem_t" title="uv_sem_t"><span class="n"><span class="pre">uv_sem_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sem</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_sem_post" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_sem_wait">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_wait</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_sem_t" title="uv_sem_t"><span class="n"><span class="pre">uv_sem_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sem</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_sem_wait" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_sem_trywait">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_sem_trywait</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_sem_t" title="uv_sem_t"><span class="n"><span class="pre">uv_sem_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">sem</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_sem_trywait" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="conditions">
<h3>Conditions<a class="headerlink" href="#conditions" title="Permalink to this headline">¶</a></h3>
<p>Functions return 0 on success or an error code &lt; 0 (unless the
return type is void, of course).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Callers should be prepared to deal with spurious wakeups on <a class="reference internal" href="#c.uv_cond_wait" title="uv_cond_wait"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_cond_wait()</span></code></a>
and <a class="reference internal" href="#c.uv_cond_timedwait" title="uv_cond_timedwait"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_cond_timedwait()</span></code></a>.</p></li>
<li><p>The timeout parameter for <a class="reference internal" href="#c.uv_cond_timedwait" title="uv_cond_timedwait"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_cond_timedwait()</span></code></a> is relative to the time
at which function is called.</p></li>
<li><p>On z/OS, the timeout parameter for <a class="reference internal" href="#c.uv_cond_timedwait" title="uv_cond_timedwait"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_cond_timedwait()</span></code></a> is converted to an
absolute system time at which the wait expires. If the current system clock time
passes the absolute time calculated before the condition is signaled, an ETIMEDOUT
error results. After the wait begins, the wait time is not affected by changes
to the system clock.</p></li>
</ol>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_destroy">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_destroy</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_destroy" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_signal">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_signal</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_signal" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_broadcast">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_broadcast</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_broadcast" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_wait">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_wait</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span>, <a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mutex</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_wait" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_cond_timedwait">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_cond_timedwait</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_cond_t" title="uv_cond_t"><span class="n"><span class="pre">uv_cond_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">cond</span></span>, <a class="reference internal" href="#c.uv_mutex_t" title="uv_mutex_t"><span class="n"><span class="pre">uv_mutex_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">mutex</span></span>, <span class="n"><span class="pre">uint64_t</span></span><span class="w"> </span><span class="n"><span class="pre">timeout</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_cond_timedwait" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
<section id="barriers">
<h3>Barriers<a class="headerlink" href="#barriers" title="Permalink to this headline">¶</a></h3>
<p>Functions return 0 on success or an error code &lt; 0 (unless the
return type is void, of course).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a class="reference internal" href="#c.uv_barrier_wait" title="uv_barrier_wait"><code class="xref c c-func docutils literal notranslate"><span class="pre">uv_barrier_wait()</span></code></a> returns a value &gt; 0 to an arbitrarily chosen “serializer” thread
to facilitate cleanup, i.e.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">uv_barrier_wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">barrier</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">uv_barrier_destroy</span><span class="p">(</span><span class="o">&amp;</span><span class="n">barrier</span><span class="p">);</span>
</pre></div>
</div>
</div>
<dl class="c function">
<dt class="sig sig-object c" id="c.uv_barrier_init">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_barrier_init</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_barrier_t" title="uv_barrier_t"><span class="n"><span class="pre">uv_barrier_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">barrier</span></span>, <span class="kt"><span class="pre">unsigned</span></span><span class="w"> </span><span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="n"><span class="pre">count</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_barrier_init" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_barrier_destroy">
<span class="kt"><span class="pre">void</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_barrier_destroy</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_barrier_t" title="uv_barrier_t"><span class="n"><span class="pre">uv_barrier_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">barrier</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_barrier_destroy" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

<dl class="c function">
<dt class="sig sig-object c" id="c.uv_barrier_wait">
<span class="kt"><span class="pre">int</span></span><span class="w"> </span><span class="sig-name descname"><span class="n"><span class="pre">uv_barrier_wait</span></span></span><span class="sig-paren">(</span><a class="reference internal" href="#c.uv_barrier_t" title="uv_barrier_t"><span class="n"><span class="pre">uv_barrier_t</span></span></a><span class="w"> </span><span class="p"><span class="pre">*</span></span><span class="n"><span class="pre">barrier</span></span><span class="sig-paren">)</span><a class="headerlink" href="#c.uv_barrier_wait" title="Permalink to this definition">¶</a><br /></dt>
<dd></dd></dl>

</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/logo.png" alt="Logo"/>
            </a></p>
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">Threading and synchronization utilities</a><ul>
<li><a class="reference internal" href="#data-types">Data types</a></li>
<li><a class="reference internal" href="#api">API</a><ul>
<li><a class="reference internal" href="#threads">Threads</a></li>
<li><a class="reference internal" href="#thread-local-storage">Thread-local storage</a></li>
<li><a class="reference internal" href="#once-only-initialization">Once-only initialization</a></li>
<li><a class="reference internal" href="#mutex-locks">Mutex locks</a></li>
<li><a class="reference internal" href="#read-write-locks">Read-write locks</a></li>
<li><a class="reference internal" href="#semaphores">Semaphores</a></li>
<li><a class="reference internal" href="#conditions">Conditions</a></li>
<li><a class="reference internal" href="#barriers">Barriers</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="dll.html"
                          title="previous chapter">Shared library handling</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="misc.html"
                          title="next chapter">Miscellaneous utilities</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/threading.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="misc.html" title="Miscellaneous utilities"
             >next</a> |</li>
        <li class="right" >
          <a href="dll.html" title="Shared library handling"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">libuv 1.44.2-dev documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="api.html" >API documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Threading and synchronization utilities</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2014-present, libuv contributors.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 4.4.0.
    </div>
  </body>
</html>